[gd_scene load_steps=28 format=4 uid="uid://u730p1tggvfb"]

[ext_resource type="PackedScene" uid="uid://dirjawkiwdyvb" path="res://scenes/ladder.tscn" id="1_e01dh"]
[ext_resource type="PackedScene" uid="uid://5bobworwik70" path="res://scenes/player.tscn" id="1_vljbg"]
[ext_resource type="PackedScene" uid="uid://chwq1hm1c6ake" path="res://scenes/one_way_platform.tscn" id="2_7en46"]
[ext_resource type="PackedScene" uid="uid://cbes6p0xgmvbf" path="res://scenes/enemy_simple.tscn" id="3_kssy4"]
[ext_resource type="PackedScene" uid="uid://chwame76xqi6l" path="res://scenes/cannon_ball.tscn" id="4_rl7s8"]
[ext_resource type="Texture2D" uid="uid://dmbsrtuoaekr0" path="res://tile_sets/tileset1.png" id="4_yv7j6"]
[ext_resource type="PackedScene" uid="uid://dkn6lvqu0x1vd" path="res://scenes/key_rb.tscn" id="5_5vd7t"]
[ext_resource type="PackedScene" uid="uid://bb6bemfvj0nt3" path="res://scenes/locked_door.tscn" id="5_17l2d"]
[ext_resource type="PackedScene" uid="uid://dagfrs5bi1ci6" path="res://scenes/spikes.tscn" id="7_efkx0"]
[ext_resource type="PackedScene" uid="uid://btobpn5evuwb8" path="res://scenes/cannon.tscn" id="8_dw018"]
[ext_resource type="PackedScene" uid="uid://bop1rbgs6g2n0" path="res://scenes/switcher.tscn" id="9_fbjpp"]
[ext_resource type="Script" path="res://scripts/common/rewind/RewindPlayer.cs" id="9_kdnbs"]
[ext_resource type="Script" path="res://scripts/common/rewind/audio/RewindAudioPlayer.cs" id="10_61phy"]
[ext_resource type="AudioStream" uid="uid://cwk83y0x3xvpd" path="res://music/whisper.mp3" id="10_k0s14"]
[ext_resource type="PackedScene" uid="uid://c231kcpdermgs" path="res://scenes/spawner.tscn" id="10_omul8"]
[ext_resource type="AudioStream" uid="uid://7l0040kbg4ky" path="res://music/whisper_reverse.mp3" id="12_8g3xf"]
[ext_resource type="Texture2D" uid="uid://c55gba3ovncpi" path="res://sprites/parallax_bg.png" id="14_5n2d4"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_a5xc7"]
texture = ExtResource("4_yv7j6")
3:3/size_in_atlas = Vector2i(13, 5)
3:3/0 = 0
18:3/size_in_atlas = Vector2i(18, 5)
18:3/0 = 0
3:10/size_in_atlas = Vector2i(6, 6)
3:10/0 = 0
11:10/size_in_atlas = Vector2i(14, 6)
11:10/0 = 0
27:10/size_in_atlas = Vector2i(9, 5)
27:10/0 = 0
38:3/size_in_atlas = Vector2i(11, 47)
38:3/0 = 0
3:17/size_in_atlas = Vector2i(6, 6)
3:17/0 = 0
11:17/size_in_atlas = Vector2i(14, 3)
11:17/0 = 0
27:17/size_in_atlas = Vector2i(9, 4)
27:17/0 = 0
11:21/size_in_atlas = Vector2i(14, 5)
11:21/0 = 0
3:25/size_in_atlas = Vector2i(6, 27)
3:25/0 = 0
11:28/size_in_atlas = Vector2i(14, 6)
11:28/0 = 0
11:35/size_in_atlas = Vector2i(14, 9)
11:35/0 = 0
27:28/size_in_atlas = Vector2i(9, 6)
27:28/0 = 0
27:35/size_in_atlas = Vector2i(9, 9)
27:35/0 = 0
27:44/size_in_atlas = Vector2i(9, 5)
27:44/0 = 0
51:4/size_in_atlas = Vector2i(9, 45)
51:4/0 = 0
61:2/size_in_atlas = Vector2i(15, 74)
61:2/0 = 0
3:68/size_in_atlas = Vector2i(36, 8)
3:68/0 = 0
3:68/0/physics_layer_0/polygon_0/points = PackedVector2Array(-286.78, -50.0253, 283.005, -48.1376, 282.376, 60.7226, -284.893, 62.9249)
3:53/size_in_atlas = Vector2i(54, 9)
3:53/0 = 0
3:53/0/physics_layer_0/polygon_0/points = PackedVector2Array(-424.743, -56.0032, 420.339, -54.7447, 422.699, 63.1824, -428.519, 68.5882)
3:62/size_in_atlas = Vector2i(47, 6)
3:62/0 = 0

[sub_resource type="TileSet" id="TileSet_4035l"]
tile_size = Vector2i(32, 32)
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
sources/4 = SubResource("TileSetAtlasSource_a5xc7")

[sub_resource type="Animation" id="Animation_c84js"]
resource_name = "Platform1"
length = 5.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(843, -203), Vector2(1455, -207)]
}

[sub_resource type="Animation" id="Animation_avejg"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(843, -203)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_84wdo"]
_data = {
"Platform1": SubResource("Animation_c84js"),
"RESET": SubResource("Animation_avejg")
}

[sub_resource type="Animation" id="Animation_jokj5"]
resource_name = "move"
length = 5.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(2688, 586), Vector2(3281, 310)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_l6uu7"]
_data = {
"move": SubResource("Animation_jokj5")
}

[sub_resource type="LabelSettings" id="LabelSettings_e5xqr"]
font_size = 23
outline_size = 5
outline_color = Color(0, 0, 0, 1)

[sub_resource type="LabelSettings" id="LabelSettings_v6an4"]
font_size = 22
outline_size = 5
outline_color = Color(0, 0, 0, 1)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_hp7kt"]
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(1000, 1, 1)
angle_min = 1.07288e-05
angle_max = 1.07288e-05
angular_velocity_min = -19.73
angular_velocity_max = 37.16
gravity = Vector3(-1, 1, 0)
linear_accel_min = 0.999998
linear_accel_max = 10.0
radial_accel_min = -2.23517e-06
radial_accel_max = -2.23517e-06
scale_min = 21.55
scale_max = 28.4
color = Color(0.282353, 0.45098, 0.384314, 1)
hue_variation_min = -1.0
hue_variation_max = 1.0

[node name="World" type="Node2D"]

[node name="second_world" type="Node2D" parent="."]

[node name="ladders" type="Node2D" parent="second_world"]
z_index = -10

[node name="ladder" parent="second_world/ladders" instance=ExtResource("1_e01dh")]
position = Vector2(-140, 137)

[node name="ladder3" parent="second_world/ladders" instance=ExtResource("1_e01dh")]
position = Vector2(1174, -162)

[node name="ladder4" parent="second_world/ladders" instance=ExtResource("1_e01dh")]
position = Vector2(1728, -162)

[node name="ladder5" parent="second_world/ladders" instance=ExtResource("1_e01dh")]
position = Vector2(2194, 267)

[node name="ladder2" parent="second_world/ladders" instance=ExtResource("1_e01dh")]
position = Vector2(339, 169)

[node name="locked_doors" type="Node2D" parent="second_world"]

[node name="locked_door" parent="second_world/locked_doors" instance=ExtResource("5_17l2d")]
position = Vector2(67, 360)

[node name="locked_door2" parent="second_world/locked_doors" instance=ExtResource("5_17l2d")]
position = Vector2(1286, 474)

[node name="locked_door3" parent="second_world/locked_doors" instance=ExtResource("5_17l2d")]
position = Vector2(880, -21)

[node name="cannons" type="Node2D" parent="second_world"]
z_index = -6

[node name="cannon" parent="second_world/cannons" node_paths=PackedStringArray("Characters") instance=ExtResource("8_dw018")]
position = Vector2(-259, -170)
Characters = [NodePath("cannon_ball")]

[node name="cannon_ball" parent="second_world/cannons/cannon" instance=ExtResource("4_rl7s8")]

[node name="cannon3" parent="second_world/cannons" node_paths=PackedStringArray("Characters") instance=ExtResource("8_dw018")]
position = Vector2(1400, -15)
scale = Vector2(-1, 1)
Characters = [NodePath("cannon_ball"), NodePath("cannon_ball2")]

[node name="cannon_ball" parent="second_world/cannons/cannon3" instance=ExtResource("4_rl7s8")]

[node name="cannon_ball2" parent="second_world/cannons/cannon3" instance=ExtResource("4_rl7s8")]

[node name="cannon2" parent="second_world/cannons" node_paths=PackedStringArray("Characters") instance=ExtResource("8_dw018")]
position = Vector2(-524, -62)
rotation = 0.472818
Characters = [NodePath("cannon_ball")]

[node name="cannon_ball" parent="second_world/cannons/cannon2" instance=ExtResource("4_rl7s8")]

[node name="tiles" type="Node2D" parent="second_world"]
z_index = -5

[node name="TileMapLayer" type="TileMapLayer" parent="second_world/tiles"]
position = Vector2(-129, 329)
scale = Vector2(0.5, 0.5)
tile_map_data = PackedByteArray("AAD+/wYABAADAEQAAAAoAPT/BAADAEQAAAATAAkABAADADUAAABOABAABAADADUAAABrABMABAADAEQAAACBABcABAADAEQAAACPABUABAADAEQAAACZABEABAADAEQAAAAsAA0ABAADAEQAAAA6AAgABAADAEQAAABAAPH/BAADADUAAABAAND/BAADADUAAABiAND/BAADADUAAAB/AOv/BAADADUAAAAOAOX/BAADAEQAAAA+AAwABAADAEQAAABiAO3/BAADAEQAAAAGAA0ABAADADUAAAAbAA0ABAADADUAAAD5/woABAADADUAAAANABEABAADADUAAAArANz/BAADAEQAAGA=")
tile_set = SubResource("TileSet_4035l")

[node name="one_way_platforms" type="Node2D" parent="second_world"]
z_index = -1

[node name="one_way_platform" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(-188, -107)

[node name="one_way_platform2" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(389, -108)

[node name="one_way_platform3" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(1228, 125)

[node name="one_way_platform4" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(1732, 139)

[node name="one_way_platform5" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(2261, -17)

[node name="one_way_platform6" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(1796, -448)

[node name="one_way_platform7" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(1178, -451)

[node name="one_way_platform8" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(843, -203)
AnimationNameOnStart = "Platform1"
AllAnimations = PackedStringArray("Platform1")
StartAnimationOnReady = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="second_world/one_way_platforms/one_way_platform8"]
libraries = {
"": SubResource("AnimationLibrary_84wdo")
}

[node name="one_way_platform9" parent="second_world/one_way_platforms" instance=ExtResource("2_7en46")]
position = Vector2(2688, 586)
DisableOneWayCollission = true
AllAnimations = PackedStringArray("move")

[node name="AnimationPlayer" type="AnimationPlayer" parent="second_world/one_way_platforms/one_way_platform9"]
libraries = {
"": SubResource("AnimationLibrary_l6uu7")
}

[node name="keys" type="Node2D" parent="second_world"]

[node name="key" parent="second_world/keys" instance=ExtResource("5_5vd7t")]
position = Vector2(753, 402)

[node name="key2" parent="second_world/keys" instance=ExtResource("5_5vd7t")]
position = Vector2(1061, 505)

[node name="key3" parent="second_world/keys" instance=ExtResource("5_5vd7t")]
position = Vector2(188, 405)

[node name="key4" parent="second_world/keys" instance=ExtResource("5_5vd7t")]
position = Vector2(1297, -537)

[node name="spikes" type="Node2D" parent="second_world"]

[node name="Spike" parent="second_world/spikes" instance=ExtResource("7_efkx0")]
position = Vector2(-889, 803)
points = PackedVector2Array(0, -0.0668298, 255.624, 1.40342)

[node name="switchers" type="Node2D" parent="second_world"]
z_index = -10

[node name="switcher" parent="second_world/switchers" node_paths=PackedStringArray("ReactAnimationPlayer") instance=ExtResource("9_fbjpp")]
position = Vector2(2413, 554)
Reaction = 1
ReactAnimationPlayer = NodePath("../../one_way_platforms/one_way_platform9/AnimationPlayer")
ReactAnimationName = "move"

[node name="spawners" type="Node2D" parent="second_world"]

[node name="spawner" parent="second_world/spawners" node_paths=PackedStringArray("Characters") instance=ExtResource("10_omul8")]
position = Vector2(1545, -515)
Characters = [NodePath("enemy_simple"), NodePath("enemy_simple2")]

[node name="enemy_simple" parent="second_world/spawners/spawner" instance=ExtResource("3_kssy4")]
position = Vector2(-75, -29)

[node name="enemy_simple2" parent="second_world/spawners/spawner" instance=ExtResource("3_kssy4")]
position = Vector2(-75, -29)

[node name="spawner2" parent="second_world/spawners" node_paths=PackedStringArray("Characters", "SpawnPoint") instance=ExtResource("10_omul8")]
position = Vector2(1082, 422)
SpawnInterval = 5.0
Characters = [NodePath("enemy_simple")]
SpawnPoint = NodePath("spawn_point")

[node name="enemy_simple" parent="second_world/spawners/spawner2" instance=ExtResource("3_kssy4")]
position = Vector2(5, -200)

[node name="spawn_point" type="Node2D" parent="second_world/spawners/spawner2"]
position = Vector2(19, -160)

[node name="Player" parent="." instance=ExtResource("1_vljbg")]
position = Vector2(495, 433)

[node name="RewindSpeedLabel" type="Label" parent="Player"]
offset_top = -28.0
offset_right = 40.0
offset_bottom = -5.0
text = "1x"
label_settings = SubResource("LabelSettings_e5xqr")

[node name="AudioLabel" type="Label" parent="Player"]
offset_top = -205.0
offset_right = 66.0
offset_bottom = -174.0
text = "audio:"
label_settings = SubResource("LabelSettings_v6an4")

[node name="RewindPlayer" type="Node2D" parent="." node_paths=PackedStringArray("RewindLabel")]
script = ExtResource("9_kdnbs")
RewindLabel = NodePath("../Player/RewindSpeedLabel")

[node name="BackgroundMusic" type="Node2D" parent="." node_paths=PackedStringArray("audioLabel") groups=["background_music"]]
script = ExtResource("10_61phy")
audioLabel = NodePath("../Player/AudioLabel")

[node name="forward_player" type="AudioStreamPlayer" parent="BackgroundMusic"]
stream = ExtResource("10_k0s14")

[node name="reverse_player" type="AudioStreamPlayer" parent="BackgroundMusic"]
stream = ExtResource("12_8g3xf")

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground"]
position = Vector2(569, 477)
scale = Vector2(1.6576, 1.6576)
texture = ExtResource("14_5n2d4")

[node name="GPUParticles2D" type="GPUParticles2D" parent="ParallaxBackground"]
position = Vector2(1073, -28)
amount = 50
process_material = SubResource("ParticleProcessMaterial_hp7kt")
lifetime = 30.0
